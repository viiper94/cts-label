(()=>{"use strict";var t,e={517:(t,e,n)=>{n(15)},574:()=>{},444:()=>{},303:(t,e,n)=>{n.d(e,{Z:()=>i});const i=class{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(t,e,n){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(e),null==n?void 0:n.once){const n=()=>{this.removeEventListener(t,n),this.removeEventListener(t,e)};return this.addEventListener(t,n),n}return()=>this.removeEventListener(t,e)}removeEventListener(t,e){var n;null===(n=this.listeners[t])||void 0===n||n.delete(e)}once(t,e){return this.on(t,e,{once:!0})}unAll(){this.listeners={}}emit(t,...e){this.listeners[t]&&this.listeners[t].forEach((t=>t(...e)))}}},15:(t,e,n)=>{var i=n(303);class r extends i.Z{constructor(t,e){super(),this.timeouts=[],this.isScrolling=!1,this.audioData=null,this.resizeObserver=null,this.isDragging=!1,this.options=t;const n=this.parentFromOptionsContainer(t.container);this.parent=n;const[i,r]=this.initHtml();n.appendChild(i),this.container=i,this.scrollContainer=r.querySelector(".scroll"),this.wrapper=r.querySelector(".wrapper"),this.canvasWrapper=r.querySelector(".canvases"),this.progressWrapper=r.querySelector(".progress"),this.cursor=r.querySelector(".cursor"),e&&r.appendChild(e),this.initEvents()}parentFromOptionsContainer(t){let e;if("string"==typeof t?e=document.querySelector(t):t instanceof HTMLElement&&(e=t),!e)throw new Error("Container not found");return e}initEvents(){const t=t=>{const e=this.wrapper.getBoundingClientRect(),n=t.clientX-e.left,i=t.clientX-e.left;return[n/e.width,i/e.height]};this.wrapper.addEventListener("click",(e=>{const[n,i]=t(e);this.emit("click",n,i)})),this.wrapper.addEventListener("dblclick",(e=>{const[n,i]=t(e);this.emit("dblclick",n,i)})),this.options.dragToSeek&&this.initDrag(),this.scrollContainer.addEventListener("scroll",(()=>{const{scrollLeft:t,scrollWidth:e,clientWidth:n}=this.scrollContainer,i=t/e,r=(t+n)/e;this.emit("scroll",i,r)}));const e=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{e((()=>this.reRender()))})),this.resizeObserver.observe(this.scrollContainer)}initDrag(){!function(t,e,n,i,r=5){let s=()=>{};if(!t)return s;const o=o=>{if(2===o.button)return;o.preventDefault(),o.stopPropagation(),t.style.touchAction="none";let a=o.clientX,l=o.clientY,h=!1;const c=i=>{i.preventDefault(),i.stopPropagation();const s=i.clientX,o=i.clientY;if(h||Math.abs(s-a)>=r||Math.abs(o-l)>=r){const{left:i,top:r}=t.getBoundingClientRect();h||(h=!0,null==n||n(a-i,l-r)),e(s-a,o-l,s-i,o-r),a=s,l=o}},d=t=>{h&&(t.preventDefault(),t.stopPropagation())},p=()=>{t.style.touchAction="",h&&(null==i||i()),s()};document.addEventListener("pointermove",c),document.addEventListener("pointerup",p),document.addEventListener("pointerleave",p),document.addEventListener("click",d,!0),s=()=>{document.removeEventListener("pointermove",c),document.removeEventListener("pointerup",p),document.removeEventListener("pointerleave",p),setTimeout((()=>{document.removeEventListener("click",d,!0)}),10)}};t.addEventListener("pointerdown",o)}(this.wrapper,((t,e,n)=>{this.emit("drag",Math.max(0,Math.min(1,n/this.wrapper.getBoundingClientRect().width)))}),(()=>this.isDragging=!0),(()=>this.isDragging=!1))}getHeight(){return null==this.options.height?128:isNaN(Number(this.options.height))?"auto"===this.options.height&&this.parent.clientHeight||128:Number(this.options.height)}initHtml(){const t=document.createElement("div"),e=t.attachShadow({mode:"open"});return e.innerHTML=`\n      <style>\n        :host {\n          user-select: none;\n          min-width: 1px;\n        }\n        :host audio {\n          display: block;\n          width: 100%;\n        }\n        :host .scroll {\n          overflow-x: auto;\n          overflow-y: hidden;\n          width: 100%;\n          position: relative;\n        }\n        :host .noScrollbar {\n          scrollbar-color: transparent;\n          scrollbar-width: none;\n        }\n        :host .noScrollbar::-webkit-scrollbar {\n          display: none;\n          -webkit-appearance: none;\n        }\n        :host .wrapper {\n          position: relative;\n          overflow: visible;\n          z-index: 2;\n        }\n        :host .canvases {\n          min-height: ${this.getHeight()}px;\n        }\n        :host .canvases > div {\n          position: relative;\n        }\n        :host canvas {\n          display: block;\n          position: absolute;\n          top: 0;\n          image-rendering: pixelated;\n        }\n        :host .progress {\n          pointer-events: none;\n          position: absolute;\n          z-index: 2;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          overflow: hidden;\n        }\n        :host .progress > div {\n          position: relative;\n        }\n        :host .cursor {\n          pointer-events: none;\n          position: absolute;\n          z-index: 5;\n          top: 0;\n          left: 0;\n          height: 100%;\n          border-radius: 2px;\n        }\n      </style>\n\n      <div class="scroll" part="scroll">\n        <div class="wrapper" part="wrapper">\n          <div class="canvases"></div>\n          <div class="progress" part="progress"></div>\n          <div class="cursor" part="cursor"></div>\n        </div>\n      </div>\n    `,[t,e]}setOptions(t){if(this.options.container!==t.container){const e=this.parentFromOptionsContainer(t.container);e.appendChild(this.container),this.parent=e}t.dragToSeek&&!this.options.dragToSeek&&this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}destroy(){var t;this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect()}createDelay(t=10){const e={};return this.timeouts.push(e),n=>{e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout(n,t)}}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const e=document.createElement("canvas"),n=e.getContext("2d").createLinearGradient(0,0,0,e.height),i=1/(t.length-1);return t.forEach(((t,e)=>{const r=e*i;n.addColorStop(r,t)})),n}renderBarWaveform(t,e,n,i){const r=t[0],s=t[1]||t[0],o=r.length,{width:a,height:l}=n.canvas,h=l/2,c=window.devicePixelRatio||1,d=e.barWidth?e.barWidth*c:1,p=e.barGap?e.barGap*c:e.barWidth?d/2:0,u=e.barRadius||0,v=a/(d+p)/o,g=u&&"roundRect"in n?"roundRect":"rect";n.beginPath();let f=0,m=0,b=0;for(let t=0;t<=o;t++){const o=Math.round(t*v);if(o>f){const t=Math.round(m*h*i),r=t+Math.round(b*h*i)||1;let s=h-t;"top"===e.barAlign?s=0:"bottom"===e.barAlign&&(s=l-r),n[g](f*(d+p),s,d,r,u),f=o,m=0,b=0}const a=Math.abs(r[t]||0),c=Math.abs(s[t]||0);a>m&&(m=a),c>b&&(b=c)}n.fill(),n.closePath()}renderLineWaveform(t,e,n,i){const r=e=>{const r=t[e]||t[0],s=r.length,{height:o}=n.canvas,a=o/2,l=n.canvas.width/s;n.moveTo(0,a);let h=0,c=0;for(let t=0;t<=s;t++){const s=Math.round(t*l);if(s>h){const t=a+(Math.round(c*a*i)||1)*(0===e?-1:1);n.lineTo(h,t),h=s,c=0}const o=Math.abs(r[t]||0);o>c&&(c=o)}n.lineTo(h,a)};n.beginPath(),r(0),r(1),n.fill(),n.closePath()}renderWaveform(t,e,n){if(n.fillStyle=this.convertColorValues(e.waveColor),e.renderFunction)return void e.renderFunction(t,n);let i=e.barHeight||1;if(e.normalize){const e=Array.from(t[0]).reduce(((t,e)=>Math.max(t,Math.abs(e))),0);i=e?1/e:1}e.barWidth||e.barGap||e.barAlign?this.renderBarWaveform(t,e,n,i):this.renderLineWaveform(t,e,n,i)}renderSingleCanvas(t,e,n,i,r,s,o,a){const l=window.devicePixelRatio||1,h=document.createElement("canvas"),c=t[0].length;h.width=Math.round(n*(s-r)/c),h.height=i*l,h.style.width=`${Math.floor(h.width/l)}px`,h.style.height=`${i}px`,h.style.left=`${Math.floor(r*n/l/c)}px`,o.appendChild(h);const d=h.getContext("2d");if(this.renderWaveform(t.map((t=>t.slice(r,s))),e,d),h.width>0&&h.height>0){const t=h.cloneNode(),n=t.getContext("2d");n.drawImage(h,0,0),n.globalCompositeOperation="source-in",n.fillStyle=this.convertColorValues(e.progressColor),n.fillRect(0,0,h.width,h.height),a.appendChild(t)}}renderChannel(t,e,n){const i=document.createElement("div"),s=this.getHeight();i.style.height=`${s}px`,this.canvasWrapper.style.minHeight=`${s}px`,this.canvasWrapper.appendChild(i);const o=i.cloneNode();this.progressWrapper.appendChild(o);const{scrollLeft:a,scrollWidth:l,clientWidth:h}=this.scrollContainer,c=t[0].length,d=c/l;let p=Math.min(r.MAX_CANVAS_WIDTH,h);if(e.barWidth||e.barGap){const t=e.barWidth||.5,n=t+(e.barGap||t/2);p%n!=0&&(p=Math.floor(p/n)*n)}const u=Math.floor(Math.abs(a)*d),v=Math.floor(u+p*d),g=v-u,f=(r,a)=>{this.renderSingleCanvas(t,e,n,s,Math.max(0,r),Math.min(a,c),i,o)},m=this.createDelay(),b=this.createDelay(),w=(t,e)=>{f(t,e),t>0&&m((()=>{w(t-g,e-g)}))},C=(t,e)=>{f(t,e),e<c&&b((()=>{C(t+g,e+g)}))};w(u,v),v<c&&C(v,v+g)}render(t){this.timeouts.forEach((t=>t.timeout&&clearTimeout(t.timeout))),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.wrapper.style.width="",null!=this.options.width&&(this.scrollContainer.style.width="number"==typeof this.options.width?`${this.options.width}px`:this.options.width);const e=window.devicePixelRatio||1,n=this.scrollContainer.clientWidth,i=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrolling=i>n;const r=this.options.fillParent&&!this.isScrolling,s=(r?n:i)*e;if(this.wrapper.style.width=r?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrolling?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.options.splitChannels)for(let e=0;e<t.numberOfChannels;e++){const n=Object.assign(Object.assign({},this.options),this.options.splitChannels[e]);this.renderChannel([t.getChannelData(e)],n,s)}else{const e=[t.getChannelData(0)];t.numberOfChannels>1&&e.push(t.getChannelData(1)),this.renderChannel(e,this.options,s)}this.audioData=t,this.emit("render")}reRender(){if(!this.audioData)return;const t=this.progressWrapper.clientWidth;this.render(this.audioData);const e=this.progressWrapper.clientWidth;this.scrollContainer.scrollLeft+=e-t}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,e=!1){const{clientWidth:n,scrollLeft:i,scrollWidth:r}=this.scrollContainer,s=r*t,o=n/2;if(s>i+(e&&this.options.autoCenter&&!this.isDragging?o:n)||s<i)if(this.options.autoCenter&&!this.isDragging){const t=o/20;s-(i+o)>=t&&s<i+n?this.scrollContainer.scrollLeft+=t:this.scrollContainer.scrollLeft=s-o}else if(this.isDragging){const t=10;this.scrollContainer.scrollLeft=s<i?s-t:s-n+t}else this.scrollContainer.scrollLeft=s;{const{scrollLeft:t}=this.scrollContainer,e=t/r,i=(t+n)/r;this.emit("scroll",e,i)}}renderProgress(t,e){if(isNaN(t))return;const n=100*t;this.canvasWrapper.style.clipPath=`polygon(${n}% 0, 100% 0, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.marginLeft=100===Math.round(n)?`-${this.options.cursorWidth}px`:"",this.isScrolling&&this.options.autoScroll&&this.scrollIntoView(t,e)}}r.MAX_CANVAS_WIDTH=4e3}},n={};function i(t){var r=n[t];if(void 0!==r)return r.exports;var s=n[t]={exports:{}};return e[t](s,s.exports,i),s.exports}i.m=e,t=[],i.O=(e,n,r,s)=>{if(!n){var o=1/0;for(c=0;c<t.length;c++){for(var[n,r,s]=t[c],a=!0,l=0;l<n.length;l++)(!1&s||o>=s)&&Object.keys(i.O).every((t=>i.O[t](n[l])))?n.splice(l--,1):(a=!1,s<o&&(o=s));if(a){t.splice(c--,1);var h=r();void 0!==h&&(e=h)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[n,r,s]},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={356:0,703:0,170:0};i.O.j=e=>0===t[e];var e=(e,n)=>{var r,s,[o,a,l]=n,h=0;if(o.some((e=>0!==t[e]))){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(l)var c=l(i)}for(e&&e(n);h<o.length;h++)s=o[h],i.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return i.O(c)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),i.O(void 0,[703,170],(()=>i(517))),i.O(void 0,[703,170],(()=>i(574)));var r=i.O(void 0,[703,170],(()=>i(444)));r=i.O(r)})();